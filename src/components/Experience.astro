---
import { Image } from 'astro:assets';
import type { InferEntrySchema } from 'astro:content';

interface Props {
    experience: InferEntrySchema<'experiences'>;
    isFirstItem?: boolean;
    isLastItem?: boolean;
}
const { experience, isFirstItem = false, isLastItem = false } = Astro.props;
---

<li
    class:list={[
        'relative py-5 sm:py-8 before:hidden sm:before:block before:w-1 before:absolute before:top-0 before:bottom-0 before:left-6 before:bg-slate-200',
        { 'before:top-5 sm:before:top-8': isFirstItem, 'before:h-5 sm:before:h-8': isLastItem },
    ]}
>
    <div class="flex gap-3 sm:gap-5 items-start mb-3 sm:mb-5">
        <div class="grow">
            <h3 class="text-xl leading-none sm:leading-normal mb-1 sm:mb-0">
                <strong class="font-semibold">{experience.position}</strong>, {experience.company}
            </h3>
            <p class="text-sm">
                {experience.start_date} &mdash;
                {experience.is_present ? 'Present' : experience.end_date}
            </p>
        </div>

        <Image
            src={experience.image_url}
            alt={experience.company}
            width="45"
            height="45"
            class="relative shrink-0 sm:order-first w-10 sm:w-13 aspect-square border border-slate-200 rounded-sm"
        />
    </div>

    <ul class="max-w-4xl pl-5 sm:pl-23 list-disc">
        {experience.details.map((detail) => <li class="text-zinc-600">{detail}</li>)}
    </ul>
</li>
