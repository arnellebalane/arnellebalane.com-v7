---
import { Image } from 'astro:assets';
import { getCollection } from 'astro:content';

const experiences = await getCollection('experiences');
---

<div>
    <h2 class="text-2xl sm:text-3xl font-semibold mb-5 sm:mb-8">Experience</h2>

    <ol class="-mt-5 sm:-mt-8">
        {
            experiences.map(({ data: experience }) => (
                <li class="py-5 sm:py-8">
                    <div class="flex gap-3 sm:gap-5 items-start mb-3 sm:mb-5">
                        <div class="grow">
                            <h3 class="text-xl leading-none sm:leading-normal mb-1 sm:mb-0">
                                <strong class="font-semibold">{experience.position}</strong>, {experience.company}
                            </h3>
                            <p class="text-sm">
                                {experience.start_date} &mdash;
                                {experience.is_present ? 'Present' : experience.end_date}
                            </p>
                        </div>

                        <Image
                            src={experience.image_url}
                            alt={experience.company}
                            width="45"
                            height="45"
                            class="shrink-0 sm:order-first w-10 sm:w-13 aspect-square border border-slate-200 rounded-sm"
                        />
                    </div>

                    <ul class="max-w-4xl pl-5 sm:pl-23 list-disc">
                        {experience.details.map((detail) => (
                            <li class="text-zinc-600">{detail}</li>
                        ))}
                    </ul>
                </li>
            ))
        }
    </ol>
</div>
