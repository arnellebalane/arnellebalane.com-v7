---
import { Image } from 'astro:assets';
import { getCollection } from 'astro:content';

const experiences = await getCollection('experiences');
---

<div>
    <h2 class="text-2xl font-semibold mb-5">Experience</h2>

    <ol class="-mt-5">
        {
            experiences.map(({ data: experience }) => (
                <li class="py-5">
                    <div class="flex gap-3 items-start">
                        <div class="grow mb-3">
                            <h3 class="text-xl leading-none mb-1">
                                <strong class="font-semibold">{experience.position}</strong>, {experience.company}
                            </h3>
                            <p class="text-sm">
                                {experience.start_date} &mdash;
                                {experience.is_present ? 'Present' : experience.end_date}
                            </p>
                        </div>

                        <Image
                            src={experience.image_url}
                            alt={experience.company}
                            width="45"
                            height="45"
                            class="shrink-0 w-10 aspect-square border border-slate-200 rounded-sm"
                        />
                    </div>

                    <ul class="pl-5 list-disc">
                        {experience.details.map((detail) => (
                            <li class="text-zinc-600">{detail}</li>
                        ))}
                    </ul>
                </li>
            ))
        }
    </ol>
</div>
